<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>
          $(document).ready(function(){
            $("button").click(function(){
                $.get("http://localhost:3000/grabMuxInfo", function(data, status){
                    var dataObject = JSON.parse(data); //JSONify the string response from node.js server
                    var objectCount = Object.keys(dataObject.nodes).length; //grab the number of objects in the data response
                    // console.log(dataObject.nodes[0].id);

                    for (let i = 0; i < objectCount; i++) {
                        let idField = `<h5>Node Id: ${dataObject.nodes[i].id}</h5>`;
                        let ingressingField = `<h4><strong>Packets Ingressing:</strong> ${dataObject.nodes[i].ingressing}</h4>`;
                        let egressingField = `<h4><strong>Packets Egressing: </strong>${dataObject.nodes[i].egressing}</h4>`;

                        let node = document.createElement('div');
                        node.classList.add('node');
                        node.innerHTML += idField + ingressingField + egressingField;
                        document.getElementById('content').appendChild(node);
                    }
                });
            });
        });
        </script>
    </head>
    <body>
        <header>
            <div>
                <img src="https://e6weh2v6enq.exactdn.com/wp-content/uploads/2023/01/viasat.png?strip=all&lossy=1&ssl=1" alt="Viasat Logo" class="change">
                <h2>Latency Detector:</h2>
            </div>
            
        </header>

        <footer>
                <div>
                    <h2> List of Data from the Mux Server:</h2>
                </div>
        </footer>
        <button class="request">Request data </button>

        <div id="content" class="node-container">

        </div>
           <!--<div class="loader"> </div>--> 

          <!--<span class="request" style="opacity: 1;"></span>-->

        <div id="mind-map"></div>
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <script src="Front-end.js"></script>
    </body>
    
</html>
